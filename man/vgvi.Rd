% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vgvi.R
\name{vgvi}
\alias{vgvi}
\title{Viewshed Greenness Visibility Index (VGVI)}
\usage{
vgvi(
  observers,
  dsm_rast,
  dtm_rast,
  greenspace_rast,
  max_distance = 200,
  observer_height = 1.7,
  m = 1,
  b = 6,
  mode = c("none", "exponential", "logit"),
  cores = 1L
)
}
\arguments{
\item{observers}{An `sf` object containing the observer locations. Each observer location should be a point geometry with a defined coordinate reference system (CRS).}

\item{dsm_rast}{A `SpatRaster` object representing the Digital Surface Model (DSM) of the area, indicating the elevation of surface objects including vegetation, buildings, and other features.}

\item{dtm_rast}{A `SpatRaster` object representing the Digital Terrain Model (DTM) of the area, indicating the elevation of the ground surface without any objects.}

\item{greenspace_rast}{A `SpatRaster` object representing the greenspace within the area. Greenspaces are indicated by a value of 1, and non-greenspaces by a value of 0.}

\item{max_distance}{The maximum distance (in meters) from the observer location within which the greenspace visibility is calculated. Default is 200 meters.}

\item{observer_height}{The height (in meters) of the observer above the ground level. Default is 1.7 meters.}

\item{m}{Parameter for the decay function, applicable if a decay function is selected. Default is 1.}

\item{b}{Parameter for the decay function, applicable if a decay function is selected. Default is 6.}

\item{mode}{A character string specifying the type of decay function to apply to the visibility weights. Options are "none" (no decay), "exponential", or "logit". Default is "none".}

\item{cores}{The number of cores to use for parallel processing. This parameter is relevant only if the function is set to run in parallel. Default is 1.}
}
\value{
A numeric vector containing the VGVI values for each observer location.
}
\description{
The VGVI expresses the proportion of visible greenness to the total visible area based on a \code{\link[terra]{viewshed}}.
The estimated VGVI values range between 0 and 1, where 0 = no green cells are visible, and 1 = all of the visible cells are green.
NA values are returned for observer locations where the observer height is greater than the maximum elevation in the DSM raster.
A distance decay function can be applied, to account for the reducing visual prominence of an object in space with increasing distance from the observer.
}
\examples{
\dontrun{
library(sf)
library(terra)

# Simulate observer locations as sf points
observers <- st_as_sf(data.frame(lon = c(5, 5.1), lat = c(52, 52.1)),
                      coords = c("lon", "lat"), crs = 4326)

# Transform to UTM zone 31N for metric units
observers <- st_transform(observers, 32631)

# Create synthetic rasters for DSM, DTM, and greenspace around observers
# This is a simplified example assuming flat terrain and random greenspaces
bbox_observers <- st_bbox(observers)
x_range <- bbox_observers[c("xmin", "xmax")]
y_range <- bbox_observers[c("ymin", "ymax")]

# Create a raster with 1km x 1km around the observers with a resolution of 100m for DSM, DTM, and greenspace
dsm_rast <- rast(nrows=100, ncols=100,
                 xmin=min(x_range)-1000, xmax=max(x_range) + 1000, 
                 ymin=min(y_range)-1000, ymax=max(y_range) + 1000, 
                 crs=crs(observers))
dsm_rast[] <- runif(ncell(dsm_rast), 0, 1.5) # Assign random heights

dtm_rast <- rast(dsm_rast, vals=0) # Flat terrain

greenspace_rast <- rast(dsm_rast)
values(greenspace_rast) <- sample(0:1, ncell(dsm_rast), replace=TRUE)

# Calculate VGVI
vgvi_results <- vgvi(observers, dsm_rast, dtm_rast, greenspace_rast)
print(vgvi_results)
}

}
